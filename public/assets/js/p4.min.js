var player=0;const me=1;var advers="";var nbCouts=0;$(document).ready(function(){wait("player")});function ready(){if(me==1){wait()}$("#game table tr td").click(function(c){if(player!==me){return}var b=this.getAttribute("data-column");var a=set(b);if(a){player=(player===1)?0:1;push(b)}})}function set(d){var a=false;for(var b=5;b>=0;b--){var c=$("#game table tr[data-row="+b+"] td[data-column="+d+"]");if(c.css("background-color")==="rgb(255, 255, 255)"){c.css("background-color",(player==1)?"yellow":"red");nbCouts++;a=true;break}}if(!a){alert("Choisissez une autre colonne")}return a}function push(b){var a="nomPartie="+nomPartie+"&token="+localStorage.getItem("token")+"&pseudo="+localStorage.getItem("user.pseudo")+"&colonne="+b;$.ajax({url:"/api/playingGame",type:"POST",data:a,dataType:"json",timeout:5000,success:function(d,c){wait()}})}function wait(a){var b="nomPartie="+nomPartie+"&token="+localStorage.getItem("token");$.ajax({url:"/api/playingGame",type:"GET",data:b,dataType:"json",timeout:5000,success:function(d,c){if(d.success==="true"&&c==="success"){if(a==="player"){if(d.data.joueur2!==""){advers=d.data.joueur2;ready()}}else{if(d.data.dernierJoueur!==""&&localStorage.getItem("user.pseudo")!==d.data.dernierJoueur){set(d.data.colonne);player=me}}}}});setTimeout(function(){if(advers===""){wait("player");return}if(me!==player&&localStorage.getItem("token")!=null&&localStorage.getItem("token")!=="null"){wait()}},5000)};